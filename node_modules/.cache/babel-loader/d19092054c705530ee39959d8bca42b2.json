{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/jalcantara/Desktop/SOL-dev/tanda-wallet-sol/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import Typography from'@material-ui/core/Typography';import LabelValue from'./LabelValue';import{useWallet,useWalletPublicKeys}from'../../utils/wallet';var TYPE_LABELS={cancelOrder:'Cancel order',newOrder:'Place order',settleFunds:'Settle funds',matchOrders:'Match orders'};var DATA_LABELS={side:{label:'Side',address:false},orderId:{label:'Order Id',address:false},limit:{label:'Limit',address:false},basePubkey:{label:'Base wallet',address:true},quotePubkey:{label:'Quote wallet',address:true}};export default function DexInstruction(_ref){var _market$_decoded,_market$_decoded$ownA;var instruction=_ref.instruction,onOpenAddress=_ref.onOpenAddress;var wallet=useWallet();var _useWalletPublicKeys=useWalletPublicKeys(),_useWalletPublicKeys2=_slicedToArray(_useWalletPublicKeys,1),publicKeys=_useWalletPublicKeys2[0];var type=instruction.type,data=instruction.data,market=instruction.market,marketInfo=instruction.marketInfo;var marketLabel=marketInfo&&(marketInfo===null||marketInfo===void 0?void 0:marketInfo.name)+((marketInfo===null||marketInfo===void 0?void 0:marketInfo.deprecated)?' (deprecated)':'')||(market===null||market===void 0?void 0:(_market$_decoded=market._decoded)===null||_market$_decoded===void 0?void 0:(_market$_decoded$ownA=_market$_decoded.ownAddress)===null||_market$_decoded$ownA===void 0?void 0:_market$_decoded$ownA.toBase58())||'Unknown';var getAddressValue=function getAddressValue(address){var isOwned=publicKeys.some(function(ownedKey){return ownedKey.equals(address);});var isOwner=wallet.publicKey.equals(address);return isOwner?'This wallet':(isOwned?'(Owned) ':'')+(address===null||address===void 0?void 0:address.toBase58());};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",style:{fontWeight:'bold'},gutterBottom:true,children:TYPE_LABELS[type]}),/*#__PURE__*/_jsx(LabelValue,{label:\"Market\",value:marketLabel,link:true,onClick:function onClick(){var _ref2,_market$_decoded2;return onOpenAddress((_ref2=(marketInfo===null||marketInfo===void 0?void 0:marketInfo.address)||(market===null||market===void 0?void 0:(_market$_decoded2=market._decoded)===null||_market$_decoded2===void 0?void 0:_market$_decoded2.ownAddress))===null||_ref2===void 0?void 0:_ref2.toBase58());}}),data&&Object.entries(data).map(function(_ref3){var _ref4=_slicedToArray(_ref3,2),key=_ref4[0],value=_ref4[1];var dataLabel=DATA_LABELS[key];if(!dataLabel){return null;}var label=dataLabel.label,address=dataLabel.address;return/*#__PURE__*/_jsx(LabelValue,{label:label+'',value:address?getAddressValue(value):value+'',link:address,onClick:function onClick(){return address&&onOpenAddress(value===null||value===void 0?void 0:value.toBase58());}},key);})]});}","map":{"version":3,"sources":["/Users/jalcantara/Desktop/SOL-dev/tanda-wallet-sol/src/components/instructions/DexInstruction.js"],"names":["React","Typography","LabelValue","useWallet","useWalletPublicKeys","TYPE_LABELS","cancelOrder","newOrder","settleFunds","matchOrders","DATA_LABELS","side","label","address","orderId","limit","basePubkey","quotePubkey","DexInstruction","instruction","onOpenAddress","wallet","publicKeys","type","data","market","marketInfo","marketLabel","name","deprecated","_decoded","ownAddress","toBase58","getAddressValue","isOwned","some","ownedKey","equals","isOwner","publicKey","fontWeight","Object","entries","map","key","value","dataLabel"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport LabelValue from './LabelValue';\nimport { useWallet, useWalletPublicKeys } from '../../utils/wallet';\n\nconst TYPE_LABELS = {\n  cancelOrder: 'Cancel order',\n  newOrder: 'Place order',\n  settleFunds: 'Settle funds',\n  matchOrders: 'Match orders',\n};\n\nconst DATA_LABELS = {\n  side: { label: 'Side', address: false },\n  orderId: { label: 'Order Id', address: false },\n  limit: { label: 'Limit', address: false },\n  basePubkey: { label: 'Base wallet', address: true },\n  quotePubkey: { label: 'Quote wallet', address: true },\n};\n\nexport default function DexInstruction({ instruction, onOpenAddress }) {\n  const wallet = useWallet();\n  const [publicKeys] = useWalletPublicKeys();\n  const { type, data, market, marketInfo } = instruction;\n\n  const marketLabel =\n    (marketInfo &&\n      marketInfo?.name + (marketInfo?.deprecated ? ' (deprecated)' : '')) ||\n    market?._decoded?.ownAddress?.toBase58() ||\n    'Unknown';\n\n  const getAddressValue = (address) => {\n    const isOwned = publicKeys.some((ownedKey) => ownedKey.equals(address));\n    const isOwner = wallet.publicKey.equals(address);\n    return isOwner\n      ? 'This wallet'\n      : (isOwned ? '(Owned) ' : '') + address?.toBase58();\n  };\n\n  return (\n    <>\n      <Typography\n        variant=\"subtitle1\"\n        style={{ fontWeight: 'bold' }}\n        gutterBottom\n      >\n        {TYPE_LABELS[type]}\n      </Typography>\n      <LabelValue\n        label=\"Market\"\n        value={marketLabel}\n        link={true}\n        onClick={() =>\n          onOpenAddress(\n            (marketInfo?.address || market?._decoded?.ownAddress)?.toBase58(),\n          )\n        }\n      />\n      {data &&\n        Object.entries(data).map(([key, value]) => {\n          const dataLabel = DATA_LABELS[key];\n          if (!dataLabel) {\n            return null;\n          }\n          const { label, address } = dataLabel;\n          return (\n            <LabelValue\n              key={key}\n              label={label + ''}\n              value={address ? getAddressValue(value) : value + ''}\n              link={address}\n              onClick={() => address && onOpenAddress(value?.toBase58())}\n            />\n          );\n        })}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}