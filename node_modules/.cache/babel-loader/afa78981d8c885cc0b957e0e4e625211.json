{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/jalcantara/Desktop/SOL-dev/Tanda-DAPP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState}from'react';import{AppBar,Button,Collapse,List,ListItem,ListItemIcon,ListItemText,makeStyles,Paper,Toolbar,Typography}from'@material-ui/core';import DeleteIcon from'@material-ui/icons/Delete';import{DoneAll,ExpandLess,ExpandMore}from'@material-ui/icons';import{useConnectedWallets}from'../utils/connected-wallets';import{useIsExtensionWidth}from'../utils/utils';import{useWalletSelector}from'../utils/wallet';export default function ConnectionsList(){var isExtensionWidth=useIsExtensionWidth();var connectedWallets=useConnectedWallets();return/*#__PURE__*/_jsxs(Paper,{children:[/*#__PURE__*/_jsx(AppBar,{position:\"static\",color:\"default\",elevation:1,children:/*#__PURE__*/_jsx(Toolbar,{children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",style:{flexGrow:1,fontSize:isExtensionWidth&&'1rem'},component:\"h2\",children:\"Connected Dapps\"})})}),/*#__PURE__*/_jsx(List,{disablePadding:true,children:Object.entries(connectedWallets).map(function(_ref){var _ref2=_slicedToArray(_ref,2),origin=_ref2[0],connectedWallet=_ref2[1];return/*#__PURE__*/_jsx(ConnectionsListItem,{origin:origin,connectedWallet:connectedWallet},origin);})})]});}var ICON_SIZE=28;var IMAGE_SIZE=24;var useStyles=makeStyles(function(theme){return{itemDetails:{marginLeft:theme.spacing(3),marginRight:theme.spacing(3),marginBottom:theme.spacing(2)},buttonContainer:{display:'flex',justifyContent:'space-evenly',marginTop:theme.spacing(1),marginBottom:theme.spacing(1)},listItemIcon:{backgroundColor:'white',display:'flex',alignItems:'center',justifyContent:'center',height:ICON_SIZE,width:ICON_SIZE,borderRadius:ICON_SIZE/2},listItemImage:{height:IMAGE_SIZE,width:IMAGE_SIZE,borderRadius:IMAGE_SIZE/2}};});function ConnectionsListItem(_ref3){var origin=_ref3.origin,connectedWallet=_ref3.connectedWallet;var classes=useStyles();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];// TODO better way to get high res icon?\nvar appleIconUrl=origin+'/apple-touch-icon.png';var faviconUrl=origin+'/favicon.ico';var _useState3=useState(appleIconUrl),_useState4=_slicedToArray(_useState3,2),iconUrl=_useState4[0],setIconUrl=_useState4[1];var _useWalletSelector=useWalletSelector(),accounts=_useWalletSelector.accounts;// TODO better way to do this\nvar account=accounts.find(function(account){return account.address.toBase58()===connectedWallet.publicKey;});var setAutoApprove=function setAutoApprove(autoApprove){chrome.storage.local.get('connectedWallets',function(result){result.connectedWallets[origin].autoApprove=autoApprove;chrome.storage.local.set({connectedWallets:result.connectedWallets});});};var disconnectWallet=function disconnectWallet(){chrome.storage.local.get('connectedWallets',function(result){delete result.connectedWallets[origin];chrome.storage.local.set({connectedWallets:result.connectedWallets});});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(ListItem,{button:true,onClick:function onClick(){return setOpen(function(open){return!open;});},children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(\"div\",{className:classes.listItemIcon,children:/*#__PURE__*/_jsx(\"img\",{src:iconUrl,onError:function onError(){return setIconUrl(faviconUrl);},className:classes.listItemImage,alt:\"\"})})}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flex:1},children:/*#__PURE__*/_jsx(ListItemText,{primary:origin,secondary:account.name})}),open?/*#__PURE__*/_jsx(ExpandLess,{}):/*#__PURE__*/_jsx(ExpandMore,{})]}),/*#__PURE__*/_jsx(Collapse,{in:open,timeout:\"auto\",unmountOnExit:true,children:/*#__PURE__*/_jsx(\"div\",{class:classes.itemDetails,children:/*#__PURE__*/_jsxs(\"div\",{class:classes.buttonContainer,children:[/*#__PURE__*/_jsx(Button,{variant:connectedWallet.autoApprove?'contained':'outlined',color:\"primary\",size:\"small\",startIcon:/*#__PURE__*/_jsx(DoneAll,{}),onClick:function onClick(){return setAutoApprove(!connectedWallet.autoApprove);},children:connectedWallet.autoApprove?'Auto-Approved':'Auto-Approve'}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"secondary\",size:\"small\",startIcon:/*#__PURE__*/_jsx(DeleteIcon,{}),onClick:disconnectWallet,children:\"Disconnect\"})]})})})]});}","map":{"version":3,"sources":["/Users/jalcantara/Desktop/SOL-dev/Tanda-DAPP/src/components/ConnectionsList.js"],"names":["React","useState","AppBar","Button","Collapse","List","ListItem","ListItemIcon","ListItemText","makeStyles","Paper","Toolbar","Typography","DeleteIcon","DoneAll","ExpandLess","ExpandMore","useConnectedWallets","useIsExtensionWidth","useWalletSelector","ConnectionsList","isExtensionWidth","connectedWallets","flexGrow","fontSize","Object","entries","map","origin","connectedWallet","ICON_SIZE","IMAGE_SIZE","useStyles","theme","itemDetails","marginLeft","spacing","marginRight","marginBottom","buttonContainer","display","justifyContent","marginTop","listItemIcon","backgroundColor","alignItems","height","width","borderRadius","listItemImage","ConnectionsListItem","classes","open","setOpen","appleIconUrl","faviconUrl","iconUrl","setIconUrl","accounts","account","find","address","toBase58","publicKey","setAutoApprove","autoApprove","chrome","storage","local","get","result","set","disconnectWallet","flex","name"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport {\n  AppBar,\n  Button,\n  Collapse,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  makeStyles,\n  Paper,\n  Toolbar,\n  Typography,\n} from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { DoneAll, ExpandLess, ExpandMore } from '@material-ui/icons';\nimport { useConnectedWallets } from '../utils/connected-wallets';\nimport { useIsExtensionWidth } from '../utils/utils';\nimport { useWalletSelector } from '../utils/wallet';\n\nexport default function ConnectionsList() {\n  const isExtensionWidth = useIsExtensionWidth();\n  const connectedWallets = useConnectedWallets();\n\n  return (\n    <Paper>\n      <AppBar position=\"static\" color=\"default\" elevation={1}>\n        <Toolbar>\n          <Typography\n            variant=\"h6\"\n            style={{ flexGrow: 1, fontSize: isExtensionWidth && '1rem' }}\n            component=\"h2\"\n          >\n            Connected Dapps\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <List disablePadding>\n        {Object.entries(connectedWallets).map(([origin, connectedWallet]) => (\n          <ConnectionsListItem\n            origin={origin}\n            connectedWallet={connectedWallet}\n            key={origin}\n          />\n        ))}\n      </List>\n    </Paper>\n  );\n}\n\nconst ICON_SIZE = 28;\nconst IMAGE_SIZE = 24;\n\nconst useStyles = makeStyles((theme) => ({\n  itemDetails: {\n    marginLeft: theme.spacing(3),\n    marginRight: theme.spacing(3),\n    marginBottom: theme.spacing(2),\n  },\n  buttonContainer: {\n    display: 'flex',\n    justifyContent: 'space-evenly',\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1),\n  },\n  listItemIcon: {\n    backgroundColor: 'white',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: ICON_SIZE,\n    width: ICON_SIZE,\n    borderRadius: ICON_SIZE / 2,\n  },\n  listItemImage: {\n    height: IMAGE_SIZE,\n    width: IMAGE_SIZE,\n    borderRadius: IMAGE_SIZE / 2,\n  },\n}));\n\nfunction ConnectionsListItem({ origin, connectedWallet }) {\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n  // TODO better way to get high res icon?\n  const appleIconUrl = origin + '/apple-touch-icon.png';\n  const faviconUrl = origin + '/favicon.ico';\n  const [iconUrl, setIconUrl] = useState(appleIconUrl);\n  const { accounts } = useWalletSelector();\n  // TODO better way to do this\n  const account = accounts.find(\n    (account) => account.address.toBase58() === connectedWallet.publicKey,\n  );\n\n  const setAutoApprove = (autoApprove) => {\n    chrome.storage.local.get('connectedWallets', (result) => {\n      result.connectedWallets[origin].autoApprove = autoApprove;\n      chrome.storage.local.set({ connectedWallets: result.connectedWallets });\n    });\n  };\n\n  const disconnectWallet = () => {\n    chrome.storage.local.get('connectedWallets', (result) => {\n      delete result.connectedWallets[origin];\n      chrome.storage.local.set({ connectedWallets: result.connectedWallets });\n    });\n  };\n\n  return (\n    <>\n      <ListItem button onClick={() => setOpen((open) => !open)}>\n        <ListItemIcon>\n          <div className={classes.listItemIcon}>\n            <img\n              src={iconUrl}\n              onError={() => setIconUrl(faviconUrl)}\n              className={classes.listItemImage}\n              alt=\"\"\n            />\n          </div>\n        </ListItemIcon>\n        <div style={{ display: 'flex', flex: 1 }}>\n          <ListItemText primary={origin} secondary={account.name} />\n        </div>\n        {open ? <ExpandLess /> : <ExpandMore />}\n      </ListItem>\n      <Collapse in={open} timeout=\"auto\" unmountOnExit>\n        <div class={classes.itemDetails}>\n          <div class={classes.buttonContainer}>\n            <Button\n              variant={connectedWallet.autoApprove ? 'contained' : 'outlined'}\n              color=\"primary\"\n              size=\"small\"\n              startIcon={<DoneAll />}\n              onClick={() => setAutoApprove(!connectedWallet.autoApprove)}\n            >\n              {connectedWallet.autoApprove ? 'Auto-Approved' : 'Auto-Approve'}\n            </Button>\n            <Button\n              variant=\"outlined\"\n              color=\"secondary\"\n              size=\"small\"\n              startIcon={<DeleteIcon />}\n              onClick={disconnectWallet}\n            >\n              Disconnect\n            </Button>\n          </div>\n        </div>\n      </Collapse>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}