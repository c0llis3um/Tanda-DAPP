{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/jalcantara/Desktop/SOL-dev/Tanda-DAPP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"/Users/jalcantara/Desktop/SOL-dev/Tanda-DAPP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jalcantara/Desktop/SOL-dev/Tanda-DAPP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/jalcantara/Desktop/SOL-dev/Tanda-DAPP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jalcantara/Desktop/SOL-dev/Tanda-DAPP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _get from\"/Users/jalcantara/Desktop/SOL-dev/Tanda-DAPP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get\";import _getPrototypeOf from\"/Users/jalcantara/Desktop/SOL-dev/Tanda-DAPP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/jalcantara/Desktop/SOL-dev/Tanda-DAPP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/jalcantara/Desktop/SOL-dev/Tanda-DAPP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _objectSpread from\"/Users/jalcantara/Desktop/SOL-dev/Tanda-DAPP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/jalcantara/Desktop/SOL-dev/Tanda-DAPP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState}from'react';import{Tooltip,Popover,IconButton,DialogActions,Button}from'@material-ui/core';import SwapHoriz from'@material-ui/icons/SwapHoriz';import PopupState,{bindTrigger,bindPopover}from'material-ui-popup-state';import Swap from'@project-serum/swap-ui';import{Provider}from'@project-serum/anchor';import{TokenListContainer}from'@solana/spl-token-registry';import{useTokenInfos}from'../utils/tokens/names';import{useSendTransaction}from'../utils/notifications';import{useWallet}from'../utils/wallet';import{useConnection}from'../utils/connection';import{useIsExtensionWidth}from'../utils/utils';import DialogForm from'./DialogForm';export default function SwapButton(_ref){var size=_ref.size;var isExtensionWidth=useIsExtensionWidth();if(isExtensionWidth){return/*#__PURE__*/_jsx(SwapButtonDialog,{size:size});}else{return/*#__PURE__*/_jsx(SwapButtonPopover,{size:size});}}function SwapButtonDialog(_ref2){var size=_ref2.size;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),dialogOpen=_useState2[0],setDialogOpen=_useState2[1];var _useSendTransaction=useSendTransaction(),_useSendTransaction2=_slicedToArray(_useSendTransaction,1),sendTransaction=_useSendTransaction2[0];var connection=useConnection();var wallet=useWallet();var tokenInfos=useTokenInfos();var tokenList=tokenInfos&&new TokenListContainer(tokenInfos);var provider=new NotifyingProvider(connection,wallet,sendTransaction);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Tooltip,{title:\"Swap Tokens\",children:/*#__PURE__*/_jsx(IconButton,{size:size,onClick:function onClick(){return setDialogOpen(true);},children:/*#__PURE__*/_jsx(SwapHoriz,{})})}),/*#__PURE__*/_jsx(DialogForm,{open:dialogOpen,onClose:function onClose(){return setDialogOpen(false);},fullWidth:true,children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',flexDirection:'column',height:'100%'},children:[/*#__PURE__*/_jsx(Swap,{provider:provider,tokenList:tokenList,containerStyle:{width:'100%',boxShadow:'none'}}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return setDialogOpen(false);},children:\"Close\"})})]})})]});}function SwapButtonPopover(_ref3){var size=_ref3.size;var _useSendTransaction3=useSendTransaction(),_useSendTransaction4=_slicedToArray(_useSendTransaction3,1),sendTransaction=_useSendTransaction4[0];var connection=useConnection();var wallet=useWallet();var tokenInfos=useTokenInfos();var tokenList=tokenInfos&&new TokenListContainer(tokenInfos);var provider=new NotifyingProvider(connection,wallet,sendTransaction);return tokenList&&/*#__PURE__*/_jsx(PopupState,{variant:\"popover\",children:function children(popupState){return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[/*#__PURE__*/_jsx(Tooltip,{title:\"Swap Tokens\",children:/*#__PURE__*/_jsx(IconButton,_objectSpread(_objectSpread({},bindTrigger(popupState)),{},{size:size,children:/*#__PURE__*/_jsx(SwapHoriz,{})}))}),/*#__PURE__*/_jsx(Popover,_objectSpread(_objectSpread({},bindPopover(popupState)),{},{anchorOrigin:{vertical:'bottom',horizontal:'left'},transformOrigin:{vertical:'top',horizontal:'right'},PaperProps:{style:{borderRadius:'10px'}},disableRestoreFocus:true,keepMounted:true,children:/*#__PURE__*/_jsx(Swap,{provider:provider,tokenList:tokenList,containerStyle:{width:'432px'}})}))]});}});}var NotifyingProvider=/*#__PURE__*/function(_Provider){_inherits(NotifyingProvider,_Provider);var _super=_createSuper(NotifyingProvider);function NotifyingProvider(connection,wallet,sendTransaction){var _this;_classCallCheck(this,NotifyingProvider);_this=_super.call(this,connection,wallet,{commitment:'recent'});_this.sendTransaction=sendTransaction;return _this;}_createClass(NotifyingProvider,[{key:\"send\",value:function(){var _send=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(tx,signers,opts){var _this2=this;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",new Promise(function(onSuccess,onError){_this2.sendTransaction(_get(_getPrototypeOf(NotifyingProvider.prototype),\"send\",_this2).call(_this2,tx,signers,opts),{onSuccess:onSuccess,onError:onError});}));case 1:case\"end\":return _context.stop();}}},_callee);}));function send(_x,_x2,_x3){return _send.apply(this,arguments);}return send;}()},{key:\"sendAll\",value:function(){var _sendAll=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(txs,opts){var _this3=this;return _regeneratorRuntime.wrap(function _callee3$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:return _context4.abrupt(\"return\",new Promise(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(resolve,onError){var txSigs,_iterator,_step,_loop;return _regeneratorRuntime.wrap(function _callee2$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:txSigs=[];_iterator=_createForOfIteratorHelper(txs);_context3.prev=2;_loop=/*#__PURE__*/_regeneratorRuntime.mark(function _loop(){var tx;return _regeneratorRuntime.wrap(function _loop$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:tx=_step.value;_context2.t0=txSigs;_context2.next=4;return new Promise(function(onSuccess){_this3.sendTransaction(_get(_getPrototypeOf(NotifyingProvider.prototype),\"send\",_this3).call(_this3,tx.tx,tx.signers,opts),{onSuccess:onSuccess,onError:onError});});case 4:_context2.t1=_context2.sent;_context2.t0.push.call(_context2.t0,_context2.t1);case 6:case\"end\":return _context2.stop();}}},_loop);});_iterator.s();case 5:if((_step=_iterator.n()).done){_context3.next=9;break;}return _context3.delegateYield(_loop(),\"t0\",7);case 7:_context3.next=5;break;case 9:_context3.next=14;break;case 11:_context3.prev=11;_context3.t1=_context3[\"catch\"](2);_iterator.e(_context3.t1);case 14:_context3.prev=14;_iterator.f();return _context3.finish(14);case 17:resolve(txSigs);case 18:case\"end\":return _context3.stop();}}},_callee2,null,[[2,11,14,17]]);}));return function(_x6,_x7){return _ref4.apply(this,arguments);};}()));case 1:case\"end\":return _context4.stop();}}},_callee3);}));function sendAll(_x4,_x5){return _sendAll.apply(this,arguments);}return sendAll;}()}]);return NotifyingProvider;}(Provider);","map":{"version":3,"sources":["/Users/jalcantara/Desktop/SOL-dev/Tanda-DAPP/src/components/SwapButton.js"],"names":["React","useState","Tooltip","Popover","IconButton","DialogActions","Button","SwapHoriz","PopupState","bindTrigger","bindPopover","Swap","Provider","TokenListContainer","useTokenInfos","useSendTransaction","useWallet","useConnection","useIsExtensionWidth","DialogForm","SwapButton","size","isExtensionWidth","SwapButtonDialog","dialogOpen","setDialogOpen","sendTransaction","connection","wallet","tokenInfos","tokenList","provider","NotifyingProvider","display","justifyContent","flexDirection","height","width","boxShadow","SwapButtonPopover","popupState","vertical","horizontal","style","borderRadius","commitment","tx","signers","opts","Promise","onSuccess","onError","txs","resolve","txSigs","push"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport {\n  Tooltip,\n  Popover,\n  IconButton,\n  DialogActions,\n  Button,\n} from '@material-ui/core';\nimport SwapHoriz from '@material-ui/icons/SwapHoriz';\nimport PopupState, { bindTrigger, bindPopover } from 'material-ui-popup-state';\nimport Swap from '@project-serum/swap-ui';\nimport { Provider } from '@project-serum/anchor';\nimport { TokenListContainer } from '@solana/spl-token-registry';\nimport { useTokenInfos } from '../utils/tokens/names';\nimport { useSendTransaction } from '../utils/notifications';\nimport { useWallet } from '../utils/wallet';\nimport { useConnection } from '../utils/connection';\nimport { useIsExtensionWidth } from '../utils/utils';\nimport DialogForm from './DialogForm';\n\nexport default function SwapButton({ size }) {\n  const isExtensionWidth = useIsExtensionWidth();\n  if (isExtensionWidth) {\n    return <SwapButtonDialog size={size} />;\n  } else {\n    return <SwapButtonPopover size={size} />;\n  }\n}\n\nfunction SwapButtonDialog({ size }) {\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [sendTransaction] = useSendTransaction();\n  const connection = useConnection();\n  const wallet = useWallet();\n  const tokenInfos = useTokenInfos();\n  const tokenList = tokenInfos && new TokenListContainer(tokenInfos);\n  const provider = new NotifyingProvider(connection, wallet, sendTransaction);\n  return (\n    <>\n      <Tooltip title=\"Swap Tokens\">\n        <IconButton size={size} onClick={() => setDialogOpen(true)}>\n          <SwapHoriz />\n        </IconButton>\n      </Tooltip>\n      <DialogForm\n        open={dialogOpen}\n        onClose={() => setDialogOpen(false)}\n        fullWidth\n      >\n        <div\n          style={{\n            display: 'flex',\n            justifyContent: 'space-between',\n            flexDirection: 'column',\n            height: '100%',\n          }}\n        >\n          <Swap\n            provider={provider}\n            tokenList={tokenList}\n            containerStyle={{\n              width: '100%',\n              boxShadow: 'none',\n            }}\n          />\n          <DialogActions>\n            <Button onClick={() => setDialogOpen(false)}>Close</Button>\n          </DialogActions>\n        </div>\n      </DialogForm>\n    </>\n  );\n}\n\nfunction SwapButtonPopover({ size }) {\n  const [sendTransaction] = useSendTransaction();\n  const connection = useConnection();\n  const wallet = useWallet();\n  const tokenInfos = useTokenInfos();\n  const tokenList = tokenInfos && new TokenListContainer(tokenInfos);\n  const provider = new NotifyingProvider(connection, wallet, sendTransaction);\n  return (\n    tokenList && (\n      <PopupState variant=\"popover\">\n        {(popupState) => (\n          <div style={{ display: 'flex' }}>\n            <Tooltip title=\"Swap Tokens\">\n              <IconButton {...bindTrigger(popupState)} size={size}>\n                <SwapHoriz />\n              </IconButton>\n            </Tooltip>\n            <Popover\n              {...bindPopover(popupState)}\n              anchorOrigin={{\n                vertical: 'bottom',\n                horizontal: 'left',\n              }}\n              transformOrigin={{\n                vertical: 'top',\n                horizontal: 'right',\n              }}\n              PaperProps={{ style: { borderRadius: '10px' } }}\n              disableRestoreFocus\n              keepMounted\n            >\n              <Swap\n                provider={provider}\n                tokenList={tokenList}\n                containerStyle={{ width: '432px' }}\n              />\n            </Popover>\n          </div>\n        )}\n      </PopupState>\n    )\n  );\n}\n\nclass NotifyingProvider extends Provider {\n  constructor(\n    connection,\n    wallet,\n    sendTransaction,\n  ) {\n    super(connection, wallet, {\n      commitment: 'recent',\n    });\n    this.sendTransaction = sendTransaction;\n  }\n\n  async send(\n    tx,\n    signers,\n    opts,\n  ) {\n    return new Promise((onSuccess, onError) => {\n      this.sendTransaction(super.send(tx, signers, opts), {\n        onSuccess,\n        onError,\n      });\n    });\n  }\n\n  async sendAll(\n    txs,\n    opts,\n  ) {\n    return new Promise(async (resolve, onError) => {\n      let txSigs = [];\n      for (const tx of txs) {\n        txSigs.push(\n          await new Promise((onSuccess) => {\n            this.sendTransaction(super.send(tx.tx, tx.signers, opts), {\n              onSuccess,\n              onError,\n            });\n          }),\n        );\n      }\n      resolve(txSigs);\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module"}